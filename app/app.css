@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* Class-based dark mode (toggle + persist) */
@custom-variant dark (&:where(.dark, .dark *));

@import "highlight.js/styles/github.css";

/* Dark mode syntax highlighting overrides */
.dark .hljs { color: #c9d1d9; background: transparent; }
.dark .hljs-doctag, .dark .hljs-keyword, .dark .hljs-meta .hljs-keyword,
.dark .hljs-template-tag, .dark .hljs-template-variable, .dark .hljs-type,
.dark .hljs-variable.language_ { color: #ff7b72; }
.dark .hljs-title, .dark .hljs-title.class_, .dark .hljs-title.class_.inherited__,
.dark .hljs-title.function_ { color: #d2a8ff; }
.dark .hljs-attr, .dark .hljs-attribute, .dark .hljs-literal, .dark .hljs-meta,
.dark .hljs-number, .dark .hljs-operator, .dark .hljs-variable,
.dark .hljs-selector-attr, .dark .hljs-selector-class, .dark .hljs-selector-id { color: #79c0ff; }
.dark .hljs-regexp, .dark .hljs-string, .dark .hljs-meta .hljs-string { color: #a5d6ff; }
.dark .hljs-built_in, .dark .hljs-symbol { color: #ffa657; }
.dark .hljs-comment, .dark .hljs-code, .dark .hljs-formula { color: #8b949e; }
.dark .hljs-name, .dark .hljs-quote, .dark .hljs-selector-tag, .dark .hljs-selector-pseudo { color: #7ee787; }
.dark .hljs-subst { color: #c9d1d9; }

@theme {
  --font-sans:
    "Inter", ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
    "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
}

/* Theme CSS variables */
:root {
  --color-bg: #ffffff;
  --color-bg-subtle: rgba(0, 0, 0, 0.03);
  --color-bg-hover: rgba(0, 0, 0, 0.05);
  --color-bg-muted: rgba(0, 0, 0, 0.07);
  --color-text: #111827;
  --color-text-muted: #6b7280;
  --color-text-subtle: #9ca3af;
  --color-border: rgba(0, 0, 0, 0.1);
  --color-accent: #111827;
  --color-overlay: rgba(0, 0, 0, 0.2);
  --color-overlay-bg: rgba(17, 17, 17, 0.35);
  --color-overlay-backdrop: rgba(0, 0, 0, 0.5);
  --color-spinner: rgba(0, 0, 0, 0.3);
  --color-spinner-accent: #111827;
  --color-code-bg: #f6f8fa;
  --color-code-border: rgba(0, 0, 0, 0.08);
  color-scheme: light;
}

.dark {
  --color-bg: #030712;
  --color-bg-subtle: rgba(255, 255, 255, 0.03);
  --color-bg-hover: rgba(255, 255, 255, 0.05);
  --color-bg-muted: rgba(255, 255, 255, 0.07);
  --color-text: #f9fafb;
  --color-text-muted: #d1d5db;
  --color-text-subtle: #9ca3af;
  --color-border: rgba(255, 255, 255, 0.1);
  --color-accent: #f9fafb;
  --color-overlay: rgba(0, 0, 0, 0.4);
  --color-overlay-bg: rgba(17, 17, 17, 0.35);
  --color-overlay-backdrop: rgba(0, 0, 0, 0.6);
  --color-spinner: rgba(255, 255, 255, 0.25);
  --color-spinner-accent: #ffffff;
  --color-code-bg: #181b1f;
  --color-code-border: rgba(255, 255, 255, 0.06);
  color-scheme: dark;
}

/* Mobile-first responsive base */
html {
  -webkit-text-size-adjust: 100%;
  scroll-behavior: smooth;
  background-color: var(--color-bg);
}

html,
body {
  min-height: 100%;
  color: var(--color-text);
  background-color: var(--color-bg);
}

/* Responsive typography scale (mobile-first) */
.text-responsive-xl {
  @apply text-xl sm:text-2xl;
}

.text-responsive-2xl {
  @apply text-2xl sm:text-3xl md:text-4xl;
}

.text-responsive-3xl {
  @apply text-3xl sm:text-4xl md:text-5xl;
}

.prose pre .hljs {
  background: transparent !important;
}

.prose pre {
  background-color: var(--color-code-bg) !important;
  padding: 1rem !important;
  border-radius: 0.75rem !important;
  border: 1px solid var(--color-code-border);
  box-shadow:
    0 0 0 1px var(--color-border) inset,
    0 4px 12px rgba(0, 0, 0, 0.08);
}

.dark .prose pre {
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.03) inset,
    0 4px 12px rgba(0, 0, 0, 0.25);
}

.prose code {
  background: transparent !important;
  font-size: 0.95rem !important;
}


/* overlay */
.loading .loading-overlay {
  opacity: 1;
  visibility: visible;
}

.loading-overlay {
  position: fixed;
  inset: 0;
  background: var(--color-overlay-bg);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: 0.2s ease;
  opacity: 0;
  visibility: hidden;
  z-index: 50;
}

/* spinner */
.loading-spinner {
  width: 28px;
  height: 28px;
  border-radius: 9999px;
  border: 3px solid var(--color-spinner);
  border-top-color: var(--color-spinner-accent);
  animation: spin 0.7s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Theme-aware utility classes */
.text-theme { color: var(--color-text); }
.text-theme-muted { color: var(--color-text-muted); }
.text-theme-subtle { color: var(--color-text-subtle); }
.text-theme-accent { color: var(--color-accent); }
.hover\:text-theme-accent:hover { color: var(--color-accent); }
.bg-theme { background-color: var(--color-bg); }
.bg-theme-accent { background-color: var(--color-accent); }
.bg-theme-subtle { background-color: var(--color-bg-subtle); }
.bg-theme-hover:hover { background-color: var(--color-bg-hover); }
.bg-theme-muted { background-color: var(--color-bg-muted); }
.border-theme { border-color: var(--color-border); }
.ring-theme { --tw-ring-color: var(--color-border); }
.divide-theme > :not([hidden]) ~ :not([hidden]) { border-color: var(--color-border); }
.bg-overlay-backdrop { background-color: var(--color-overlay-backdrop); }
